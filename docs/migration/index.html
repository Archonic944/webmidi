<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.14">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="WEBMIDI.js RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="WEBMIDI.js Atom Feed">
<link rel="search" type="application/opensearchdescription+xml" title="WEBMIDI.js" href="/opensearch.xml"><title data-react-helmet="true">Migration | WEBMIDI.js</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:image" content="https://webmidijs.org/img/og-card.png"><meta data-react-helmet="true" name="twitter:image" content="https://webmidijs.org/img/og-card.png"><meta data-react-helmet="true" property="og:url" content="https://webmidijs.org/docs/migration"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" name="robots" content="max-image-preview:large"><meta data-react-helmet="true" property="og:title" content="Migration | WEBMIDI.js"><meta data-react-helmet="true" name="description" content="This document is a work in progress. Your feedback is critical in identifying and, hopefully,"><meta data-react-helmet="true" property="og:description" content="This document is a work in progress. Your feedback is critical in identifying and, hopefully,"><link data-react-helmet="true" rel="icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://webmidijs.org/docs/migration"><link data-react-helmet="true" rel="alternate" href="https://webmidijs.org/docs/migration" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://webmidijs.org/docs/migration" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://KHO24V8B5T-dsn.algolia.net" crossorigin="anonymous"><script data-react-helmet="true" id="mcjs" src="/scripts/newsletter-popup.js"></script><link rel="stylesheet" href="/assets/css/styles.6b80d215.css">
<link rel="preload" href="/assets/js/runtime~main.8bc55875.js" as="script">
<link rel="preload" href="/assets/js/main.f6ddcd2d.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><div class="announcementBar_3WsW" role="banner"><div class="announcementBarPlaceholder_2m9F"></div><div class="announcementBarContent_3EUC"><a target="_blank" href="https://github.com/sponsors/djipco"><strong>Sponsor</strong></a> ‚ù§Ô∏è WEBMIDI.js on GitHub!</div><button type="button" class="clean-btn close announcementBarClose_38nx" aria-label="Close"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/webmidijs-logo-dark.svg" alt="WEBMIDI.js" class="themedImage_1VuW themedImage--light_3UqQ"><img src="/img/webmidijs-logo-light.svg" alt="WEBMIDI.js" class="themedImage_1VuW themedImage--dark_hz6m"></div></a><a class="navbar__item navbar__link navbar__link--active" href="/docs/">Docs</a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" class="navbar__link">API</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/api">3.x</a></li><li><a href="https://djipco.github.io/webmidi/archives/api/v2/" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>2.5.3<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a href="https://djipco.github.io/webmidi/archives/api/v1/classes/WebMidi.html" target="_blank" rel="noopener noreferrer" class="dropdown__link"><span>1.0.0-beta.15<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" class="navbar__link">Community</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/sponsors">Sponsors</a></li><li><a class="dropdown__link" href="/showcase">Showcase</a></li><li><a href="https://github.com/djipco/webmidi/discussions" target="_blank" rel="noopener noreferrer" class="dropdown__link external"><span>GitHub Discussions<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a href="https://mailchi.mp/eeffe50651bd/webmidijs-newsletter" target="_blank" rel="noopener noreferrer" class="dropdown__link external"><span>Newsletter Subscription<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li><a href="https://webmidijs.org/forum/" target="_blank" rel="noopener noreferrer" class="dropdown__link external"><span>Forum (Archived)<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" class="navbar__link">Behind the Scenes</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/about">About</a></li><li><a class="dropdown__link" href="/blog">Blog</a></li></ul></div></div><div class="navbar__items navbar__items--right"><a href="https://github.com/djipco/webmidi" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub Repo"></a><a href="https://twitter.com/webmidijs" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-twitter-link" aria-label="Twitter Feed"></a><div class="toggle_71bT toggle_2xs0 toggleDisabled_3cF-"><div class="toggleTrack_32Fl" role="button" tabindex="-1"><div class="toggleTrackCheck_3lV7"><span class="toggleIcon_O4iE">üåú</span></div><div class="toggleTrackX_S2yS"><span class="toggleIcon_O4iE">üåû</span></div><div class="toggleTrackThumb_xI_Z"></div></div><input type="checkbox" class="toggleScreenReader_28Tw" aria-label="Switch between dark and light mode"></div><div class="searchBox_1Kl_"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_31aa"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_35hR" type="button"></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/">Quick Start For v3.x</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_2fq0" href="/docs/getting-started">Getting Started</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_2fq0" href="/docs/going-further/middle-c">Going Further</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_2fq0" href="/docs/archives/v2">Previous Versions</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_2fq0" href="/docs/roadmap/v3">Roadmap</a></div></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="tocCollapsible_1PrD theme-doc-toc-mobile tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Migration</h1></header><div class="admonition admonition-caution alert alert--warning"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</h5></div><div class="admonition-content"><p>This document is a work in progress. Your feedback is critical in identifying and, hopefully,
mitigating migration pitfalls. üôèüèª Please <strong>share your observations, suggestions and issues</strong> in the
<a href="https://github.com/djipco/webmidi/discussions/categories/migration" target="_blank" rel="noopener noreferrer"><strong>Migration</strong></a> section of the forum
so they can benefit others! </p></div></div><h2 class="anchor anchorWithStickyNavbar_31ik" id="highlights-of-the-new-version">Highlights of the New Version<a class="hash-link" href="#highlights-of-the-new-version" title="Direct link to heading">‚Äã</a></h2><p>Version 3.x is a <strong>major</strong> update. It moves WEBMIDI.js from a smallish hobby project to a more
serious long-term endeavour. Here are some key highlights:</p><ul><li>Modern architecture with <strong>ESM</strong> (ECMAScript module), <strong>IIFE</strong> (Immediately Invoked Function
Expression) and <strong>CJS</strong> (CommonJS) flavours</li><li>Full <strong>Node.js</strong> support</li><li><strong>TypeScript</strong> definitions files</li><li>Various <strong>new objects</strong>:<ul><li><a href="/api/classes/InputChannel"><code>InputChannel</code></a> and <a href="/api/classes/OutputChannel"><code>OutputChannel</code></a>
objects to communicate with a single MIDI channel</li><li><a href="/api/classes/Note"><code>Note</code></a> object to store and pass around note information</li><li><a href="/api/classes/Message"><code>Message</code></a> object to better encapsulate MIDI messages</li><li><a href="/api/classes/Forwarder"><code>Forwarder</code></a> object to allow message forwarding from an input to an output</li><li>and others...</li></ul></li><li>More and better <strong>unit tests</strong> to prevent regression issues</li><li>Support for <strong>promises</strong> where appropriate (such as
<a href="/api/classes/WebMidi#enable"><code>WebMidi.enable()</code></a>)</li><li>More granular <strong>events</strong>. For example:<ul><li><code>midiaccessgranted</code> to know when a user clicked the MIDI authorization prompt</li><li><code>controlchange-controllerXXX</code> to listen to a single type of control change message</li><li>and various others...</li></ul></li><li>Ability to query <strong>current note state</strong> (currently playing or not) with
<a href="/api/classes/InputChannel#getNoteState"><code>InputChannel.getNoteState()</code></a>
and <a href="/api/classes/InputChannel#notesState"><code>InputChannel.notesState</code></a> array</li><li>Ability to unplug and replug a device while <strong>retaining its state</strong></li><li>Better <strong>sysex</strong> (system exclusive) message support</li><li><strong>Octave transposition</strong> can be performed at the global, input/output or channel level</li><li>and so much more!</li></ul><h2 class="anchor anchorWithStickyNavbar_31ik" id="backwards-compatibility">Backwards Compatibility<a class="hash-link" href="#backwards-compatibility" title="Direct link to heading">‚Äã</a></h2><p>Backwards compatibility was a major concern while developing the new version. While every effort
has been made to ease the transition, the new version might break a few things, mostly in edge
cases.</p><p>Whenever it was possible, we deprecated old practices instead of completely dropping support. This
means that your code should continue to work but you may see warnings in the console about the new
ways to do things.</p><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>If you expected certain things to keep working after upgrade and they don&#x27;t, please reach out in the
<a href="https://github.com/djipco/webmidi/discussions/categories/migration" target="_blank" rel="noopener noreferrer"><strong>Migration</strong></a> section of the
forum so whe can assess if the behaviour is expected or not and troubleshoot from there.</p></div></div><h2 class="anchor anchorWithStickyNavbar_31ik" id="architecture-change">Architecture Change<a class="hash-link" href="#architecture-change" title="Direct link to heading">‚Äã</a></h2><p>In v2, there was a top-level <code>WebMidi</code> object that provided access to a list of inputs and outputs.
Most of the activity happened at the <code>Input</code> and <code>Output</code> level. This is where you would listen for
inbound messages and send outbound messages.</p><p>For example, if you wanted to listen for a message on a single MIDI channel, you would have
specified it in the call to <code>addListener()</code> in this manner:</p><div class="codeBlockContainer_K1bP language-javascript theme-code-block"><div class="codeBlockContent_hGly javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// In WebMidi.js version 2.5.x</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token maybe-class-name">WebMidi</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">inputs</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">addListener</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;noteon&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">7</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> someFunction</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>This would listen for <strong>noteon</strong> events on MIDI channel 7 of input 0. <strong>While this still works in
v3</strong>, the preferred syntax would be: </p><div class="codeBlockContainer_K1bP language-javascript theme-code-block"><div class="codeBlockContent_hGly javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token maybe-class-name">WebMidi</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">inputs</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">addListener</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;noteon&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> someFunction</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">channels</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">7</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>You may think (rightly so!) that this syntax is more cumbersome. The reasoning is that, if you want
to listen to events on a single channel, you should do so on the channel itself
(the new <a href="/api/classes/InputChannel"><code>InputChannel</code></a> object):</p><div class="codeBlockContainer_K1bP language-javascript theme-code-block"><div class="codeBlockContent_hGly javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token maybe-class-name">WebMidi</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">inputs</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">channels</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">7</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">addListener</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;noteon&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> someFunction</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Here, <code>WebMidi.inputs[0].channels[7]</code> refers to an
<a href="/api/classes/InputChannel"><code>InputChannel</code></a> object that has, for the most part, the same methods
as the <a href="/api/classes/Input"><code>Input</code></a> object you were used to in v2.5.x.</p><p>So, the idea is to use the <a href="/api/classes/Input"><code>Input</code></a> object if you need to listen to events on
more than one channel and to use the <a href="/api/classes/InputChannel"><code>InputChannel</code></a> object to listen
for events dispatched by a single channel.</p><p>The exact same logic applies to the <a href="/api/classes/Output"><code>Output</code></a> and
<a href="/api/classes/OutputChannel"><code>OutputChannel</code></a> objects. For example, if you want to send a
<strong>controlchange</strong> message to all channels of an output, you can use:</p><div class="codeBlockContainer_K1bP language-javascript theme-code-block"><div class="codeBlockContent_hGly javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token maybe-class-name">WebMidi</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">outputs</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">sendControlChange</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;resonance&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">123</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>To send to multiple, but specific, channels, you can use:</p><div class="codeBlockContainer_K1bP language-javascript theme-code-block"><div class="codeBlockContent_hGly javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token maybe-class-name">WebMidi</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">outputs</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">sendControlChange</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;resonance&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">123</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">channels</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>To send the message to a single channel (e.g. 7), you would use:</p><div class="codeBlockContainer_K1bP language-javascript theme-code-block"><div class="codeBlockContent_hGly javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token maybe-class-name">WebMidi</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">outputs</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">channels</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">7</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">sendControlChange</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;resonance&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">123</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>In the end, the idea is to target specifically what is appropriate. Therefore, a more idiomatic
snippet would be something like this:</p><div class="codeBlockContainer_K1bP language-javascript theme-code-block"><div class="codeBlockContent_hGly javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> output </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token maybe-class-name">WebMidi</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">getOutputByName</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;My Awesome Midi Device&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> synth </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> output</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">channels</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">synth</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">playNote</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;A4&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Having said all that, let me reiterate that <strong>the previous way of doing things will still work in
v3</strong>. This will give you a chance to smoothly transition to the new version.</p><p>Let&#x27;s recap. In v3, there is a top-level <a href="/api/classes/WebMidi"><code>WebMidi</code></a> object which has both
an <a href="/api/classes/WebMidi#inputs"><code>inputs</code></a> and an <a href="/api/classes/WebMidi#outputs"><code>outputs</code></a>
array. These arrays contain, respectively, a list <a href="/api/classes/Input"><code>Input</code></a> and
<a href="/api/classes/Output"><code>Output</code></a> objects. The <a href="/api/classes/Input"><code>Input</code></a> and
<a href="/api/classes/Output"><code>Output</code></a>  objects have a <code>channels</code> array that contains a list of
<a href="/api/classes/InputChannel"><code>InputChannel</code></a> or <a href="/api/classes/OutputChannel"><code>OutputChannel</code></a>
objects.</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="things-to-watch-out-for">Things to Watch Out For<a class="hash-link" href="#things-to-watch-out-for" title="Direct link to heading">‚Äã</a></h2><h3 class="anchor anchorWithStickyNavbar_31ik" id="the-webmidienable-method-now-returns-a-promise">The <code>WebMidi.enable()</code> method now returns a promise<a class="hash-link" href="#the-webmidienable-method-now-returns-a-promise" title="Direct link to heading">‚Äã</a></h3><p><strong>You can still use a callback</strong> with <a href="/api/classes/WebMidi#enable"><code>WebMidi.enable()</code></a> and it
will work just like before. However, you are now welcome to use the promise-based approach:</p><div class="codeBlockContainer_K1bP language-javascript theme-code-block"><div class="codeBlockContent_hGly javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token maybe-class-name">WebMidi</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">enable</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">then</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;WebMidi.js has been enabled!&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/djipco/webmidi/edit/master/website/docs/migration/migration.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_13-_"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/going-further/sysex"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Sysex</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/archives/v2"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Version 2.5.3</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#highlights-of-the-new-version" class="table-of-contents__link toc-highlight">Highlights of the New Version</a></li><li><a href="#backwards-compatibility" class="table-of-contents__link toc-highlight">Backwards Compatibility</a></li><li><a href="#architecture-change" class="table-of-contents__link toc-highlight">Architecture Change</a></li><li><a href="#things-to-watch-out-for" class="table-of-contents__link toc-highlight">Things to Watch Out For</a><ul><li><a href="#the-webmidienable-method-now-returns-a-promise" class="table-of-contents__link toc-highlight">The <code>WebMidi.enable()</code> method now returns a promise</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer_2bJW"><div class="container container_J_cY"><div class="sponsor_W6vH"><p>This project is supported in part by:</p><div class="sponsors_N4HH"><a href="https://www.cegepmontpetit.ca/" target="_blank" rel="noreferrer"><img src="/img/sponsors/edouard-montpetit-logo.svg" alt="Logo cegep Edouard-Montpetit"></a></div></div><div class="footer__copyright copyright_3Nz8">¬© 2015-2022 Jean-Philippe C√¥t√©</div></div></footer></div>
<script src="/assets/js/runtime~main.8bc55875.js"></script>
<script src="/assets/js/main.f6ddcd2d.js"></script>
</body>
</html>